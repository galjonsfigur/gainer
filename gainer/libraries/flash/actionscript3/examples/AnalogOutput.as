package {	import flash.geom.Rectangle;	import flash.display.Sprite;	import flash.display.MovieClip;	import flash.events.Event;	import flash.events.MouseEvent;	import gainer.*;	public class AnalogOutput extends Sprite {		private var _gnr:Gainer;		private var aoutValues:Array;		public function AnalogOutput() {			// Gainerのインスタンスを生成する			_gnr = new Gainer("localhost", 2000, Gainer.MODE1, true);			aoutValues = new Array(4);			// I/Oモジュールの準備が完了した時に呼ばれるイベントハンドラをセット			_gnr.onReady = function() {			_start();			};		}		// I/Oモジュールの準備が完了したら以下を実行		private function _start():void {			// それぞれのスライダに対して以下を実行			for (var i:int = 0; i < 4; i++) {				// 各イベントに対してイベントリスナをセット				this["bar" + i].addEventListener(MouseEvent.MOUSE_DOWN, _beginDrag);				this["bar" + i].addEventListener(MouseEvent.MOUSE_UP, _endDrag);				// ドラッグ可能なスライダであることを示すためにカーソルを変更				this["bar" + i].buttonMode = true;			}			_gnr.onFinished = function():void {			_gnr.analogOutput(aoutValues);			};		}		// ドラッグ開始		private function _beginDrag(e:Event):void {			e.target.startDrag(false, new Rectangle(0, 0, e.target.parent.gauge.width - e.target.width, 0));			addEventListener(Event.ENTER_FRAME, _updateValues);		}		// ドラッグ終了		private function _endDrag(e:Event):void {			e.currentTarget.stopDrag();			removeEventListener(Event.ENTER_FRAME, _updateValues);		}		private function _updateValues(e:Event):void {			// それぞれのスライダに対して以下を実行			for (var i:int = 0; i < 4; i++) {				aoutValues[i] = this["bar" + i].slider.x;			}			_gnr.analogOutput(aoutValues);		}	}}